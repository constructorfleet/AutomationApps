set_movie_mode_enabled_from_remote:
  module: call_when
  class: CallWhen
  global_dependencies:
    - base_app
    - validation
  trigger:
    entity_id: light.toggle_movie_mode
    state: 'on'
  call:
    domain: homeassistant
    service: turn_on
    service_data:
      entity_id: input_boolean.enable_movie_mode

set_movie_mode_disabled_from_remote:
  module: call_when
  class: CallWhen
  global_dependencies:
    - base_app
    - validation
  trigger:
    entity_id: light.toggle_movie_mode
    state: 'off'
  call:
    domain: homeassistant
    service: turn_off
    service_data:
      entity_id: input_boolean.enable_movie_mode

living_room_movie_mode:
  module: media
  class: MovieMode
  global_dependencies:
    - validation
    - base_app
  media_player: media_player.living_room_apple_tv
  media_types:
    - movie
    - video
  reset_on_pause: turn_on_between_episodes
  check_sun: True
  tv_delay: 30
  turn_on_between_episodes:
    - light.couch_lights
  turn_off:
    - light.couch_lights
      on_brightness: 100
      stay_off: False
    - entity_id: light.hue_play_1
      on_brightness: 20
      stay_off: False
    - entity_id: light.hue_play_2
      on_brightness: 20
      stay_off: False
    - switch.lower_hall_light
    - switch.living_room_ceiling_light
    - switch.lower_hall_switch_1
    - switch.lower_hall_switch_2
  tv: remote.living_room_harmony_hub
  toggle: input_boolean.movie_mode
  log_level: DEBUG