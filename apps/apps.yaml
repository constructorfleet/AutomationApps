global_modules:
  - common.base_app
  - common.validation
  - common.utils
  - notifiers.notification_action
  - notifiers.notification_category
  - notifiers.notification_channels

fcm_notifier:
  module: fcm_notifier
  class: FcmNotifier
  global_dependencies:
    - common.validation
    - notifiers.notification_action
    - notifiers.notification_category
    - notifiers.notification_channels

ios_notifier:
  module: ios_notifier
  class: iOSNotifier
  global_dependencies:
    - common.validation
    - notifiers.notification_action
    - notifiers.notification_category
    - notifiers.notification_channels

notifiers:
  module: person_notifier
  class: PersonNotifier
  global_dependencies:
    - common.validation
    - notifiers.notification_action
    - notification.notification_category
    - notification.notification_channels
  dependencies:
    - mqtt_notifier
    - ios_notifier
    - fcm_notifier
  people:
    - name: Teagan
      notifier:
        - name: ios
          service: notify/mobile_app_agrajag
    - name: Alan
      notifier:
        - name: ios
          service: notify/mobile_app_deviphone
    - name: Grace
      notifier:
        - name: fcm
          service: notify/fcm_grace

notification_action_processor:
  module: notification_action_processor
  class: NotificationActionProcessor
  global_dependencies:
    - common.validation
    - notifiers.notification_action
    - notification.notification_category
    - notification.notification_channels
  dependencies:
    - notifiers
    - mqtt_notifier
    - ios_notifier
    - fcm_notifier

night_lights:
  module: night_lights
  class: NightLights
  dawn:
    offset: 60
    entities:
      - entity_id: light.entry_light
        service: light/turn_off
      - entity_id: light.porch_upper
        service: light/turn_off
      - entity_id: light.porch_lower
        service: light/turn_off
      - entity_id: light.garage_upper_1
        service: light/turn_off
      - entity_id: light.garage_upper_2
        service: light/turn_off
      - entity_id: light.garage_lower_1
        service: light/turn_off
      - entity_id: light.garage_lower_2
        service: light/turn_off
  dusk:
    offset: 60
    entities:
      - entity_id: light.entry_light
        service: light/turn_on
        service_data:
          brightness_pct: 100
      - entity_id: light.porch_upper
        service: light/turn_off
        service_data:
          brightness_pct: 100
      - entity_id: light.porch_lower
        service: light/turn_on
        service_data:
          brightness_pct: 100
      - entity_id: light.garage_upper_1
        service: light/turn_on
        service_data:
          brightness_pct: 100
      - entity_id: light.garage_upper_2
        service: light/turn_on
        service_data:
          brightness_pct: 100
      - entity_id: light.garage_lower_1
        service: light/turn_on
        service_data:
          brightness_pct: 100
      - entity_id: light.garage_lower_2
        service: light/turn_on
        service_data:
          brightness_pct: 100
  night:
    - entity_id: light.entry_light
      service: light/turn_on
      service_data:
        brightness_pct: 30

kitchen_lights:
  module: motion_lights
  class: MotionLights
  global_dependencies:
    - common.validation
  light: switch.kitchen_light
  motion_sensor:  binary_sensor.kitchen_motion
  motion_duration:  40

laundry_room_lights:
  module: motion_lights
  class: LuminanceMotionLights
  global_dependencies:
    - common.validation
  light: switch.laundry_room_lights
  motion_sensor: binary_sensor.laundry_motion
  motion_duration: 10
  light_sensor: sensor.server_rack_luminance
  light_level: 5.0

dining_lights:
  module: motion_lights
  class: LuminanceMotionLights
  global_dependencies:
    - common.validation
  light: switch.dining_room_ceiling_light
  motion_sensor: binary_sensor.dining_room_motion
  motion_duration: input_number.dining_room_motion_duration
  light_sensor: sensor.dining_room_luminance
  light_level: 10

basement_stair_light:
  module: motion_lights
  class: LuminanceMotionLights
  global_dependencies:
    - common.validation
  light: switch.basement_stair_light
  motion_sensor: binary_sensor.basement_stair_motion
  motion_duration: input_number.basement_stairs_max_duration
  max_duration: input_number.basement_stairs_max_duration
  light_sensor: sensor.bottom_basement_stairs_luminance
  light_level: 2
  switches:
    - switch.basement_stair_switch_1
    - switch.basement_stair_switch_2

garage_light:
  module: motion_lights
  class: MotionLights
  global_dependencies:
    - common.validation
  light: switch.garage_light
  motion_sensor:  binary_sensor.garage_motion
  motion_duration: 30
  max_duration: 180
  light_sensor: sensor.garage_sensor_1_luminance
  light_level: 1
  switches:
    - switch.garage_light_2

lower_hall_light:
  module: motion_lights
  class: LuminanceMotionLights
  global_dependencies:
    - common.validation
  light: switch.lower_hall_light
  motion_sensor: binary_sensor.lower_stairs_motion
  motion_duration: input_number.lower_hall_motion_duration
  max_duration: input_number.lower_hall_max_duration
  light_sensor: sensor.lower_stairs_luminance
  light_level: 10
  switches:
    - switch.lower_hall_switch_1
    - switch.lower_hall_switch_2

upper_landing_hall_light:
  module: motion_lights
  class: ExternalStateControlledMotionLights
  global_dependencies:
    - common.validation
  light: switch.upper_landing
  motion_sensor: binary_sensor.upper_landing_motion
  max_duration: 1
  light_sensor: sensor.upper_landing_luminance
  light_level: 1
  entity_id: light.entry_light
  blocking_state: on
  switches:
    - switch.upper_landing_switch_1
    - switch.upper_landing_switch_2
